<%# 
  SWOOSH Bot 3D Admin Dashboard
  Premium Edition
  
  Moderation Management Page - Enterprise Edition
%>

<div class="admin3d-moderation">
  <div class="dashboard-header">
    <h1 class="section-title">Moderation Command Center</h1>
  </div>
  
  <p class="section-description">
    Manage users across your Discord servers with professional moderation tools. Enforce policies and maintain server security.
  </p>

  <!-- Tabs Container -->
  <div class="tabs-container" id="moderation-tabs">
    <div class="admin3d-tabs">
      <button class="tab-btn active" data-tab="server-management">
        <i class="fas fa-server"></i> Server Management
      </button>
      <button class="tab-btn" data-tab="ban-management">
        <i class="fas fa-ban"></i> Ban Management
      </button>
      <button class="tab-btn" data-tab="warnings">
        <i class="fas fa-exclamation-triangle"></i> Warnings
      </button>
      <button class="tab-btn" data-tab="automod">
        <i class="fas fa-shield-alt"></i> Auto-Moderation
      </button>
    </div>
    
    <!-- Fix for form interaction issues -->
    <style>
      /* Fix input interaction issues */
      .admin3d-form-input,
      .admin3d-form-textarea,
      .admin3d-form-select,
      .admin3d-btn {
        position: relative;
        z-index: 100 !important;
        pointer-events: auto !important;
      }
      
      /* Make sure forms are above the THREE.js canvas */
      #moderation-tabs .tab-content {
        position: relative;
        z-index: 50;
      }
      
      /* Ensure inputs can be interacted with */
      .admin3d-form-group {
        position: relative;
        z-index: 100;
      }
      
      /* Ensure THREE.js doesn't block */
      #moderation-three-container {
        pointer-events: none !important;
        z-index: -1 !important;
      }
    </style>
    
    <!-- Tab Content -->
    <div class="tab-content-container">
      <!-- Server Management Tab -->
      <div id="server-management" class="tab-content active">
        <!-- Server Selection -->
        <div class="admin3d-card">
          <div class="admin3d-card-header">
            <div class="admin3d-card-icon">
              <i class="fas fa-server"></i>
            </div>
            <h3 class="admin3d-card-title">Select Server</h3>
          </div>
          <div class="admin3d-card-content">
            <p class="admin3d-card-description">
              Select a server to access moderation tools and actions
            </p>
            
            <div class="admin3d-form-group">
              <label class="admin3d-form-label" for="server-select">Server</label>
              <select class="admin3d-form-select" id="server-select">
                <option value="">Select a server</option>
                <% if (client && client.guilds) { %>
                  <% client.guilds.cache.sort((a, b) => a.name.localeCompare(b.name)).forEach(guild => { %>
                    <option value="<%= guild.id %>"><%= guild.name %> (<%= guild.memberCount %> members)</option>
                  <% }); %>
                <% } %>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Server Stats Card -->
        <div class="admin3d-card" style="margin-top: 1.5rem;">
          <div class="admin3d-card-header">
            <div class="admin3d-card-icon">
              <i class="fas fa-chart-bar"></i>
            </div>
            <h3 class="admin3d-card-title">Moderation Stats</h3>
          </div>
          <div class="admin3d-card-content">
            <div class="moderation-stats-grid">
              <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-ban"></i></div>
                <div class="stat-data">
                  <span class="stat-value" id="total-bans">0</span>
                  <span class="stat-label">Total Bans</span>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-user-slash"></i></div>
                <div class="stat-data">
                  <span class="stat-value" id="total-kicks">0</span>
                  <span class="stat-label">Total Kicks</span>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-exclamation-triangle"></i></div>
                <div class="stat-data">
                  <span class="stat-value" id="total-warnings">0</span>
                  <span class="stat-label">Total Warnings</span>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                <div class="stat-data">
                  <span class="stat-value" id="total-timeouts">0</span>
                  <span class="stat-label">Active Timeouts</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Quick Actions -->
        <h2 class="section-subtitle" style="margin-top: 2rem;">Quick Actions</h2>
        <div class="admin3d-action-grid">
          <div class="admin3d-card">
            <div class="admin3d-card-header">
              <div class="admin3d-card-icon">
                <i class="fas fa-gavel"></i>
              </div>
              <h3 class="admin3d-card-title">Ban User</h3>
            </div>
            <div class="admin3d-card-content">
              <p class="admin3d-card-description">
                Permanently ban a user from the server
              </p>
              <form id="ban-form" class="admin3d-form">
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="ban-user-id">User ID</label>
                  <input class="admin3d-form-input" type="text" id="ban-user-id" name="userId" placeholder="Enter user ID" required>
                </div>
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="ban-reason">Reason</label>
                  <textarea class="admin3d-form-textarea" id="ban-reason" name="reason" placeholder="Enter ban reason" required rows="3"></textarea>
                </div>
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="ban-delete-days">Delete Messages</label>
                  <select class="admin3d-form-select" id="ban-delete-days" name="deleteDays">
                    <option value="0">Don't delete any messages</option>
                    <option value="1" selected>Delete messages from the past day</option>
                    <option value="7">Delete messages from the past week</option>
                  </select>
                </div>
                <div class="admin3d-form-actions">
                  <button type="submit" class="admin3d-btn admin3d-btn-danger" id="confirm-ban">
                    <i class="fas fa-ban"></i> Ban User
                  </button>
                </div>
              </form>
            </div>
          </div>
          
          <div class="admin3d-card">
            <div class="admin3d-card-header">
              <div class="admin3d-card-icon">
                <i class="fas fa-user-slash"></i>
              </div>
              <h3 class="admin3d-card-title">Kick User</h3>
            </div>
            <div class="admin3d-card-content">
              <p class="admin3d-card-description">
                Remove a user from the server
              </p>
              <form id="kick-form" class="admin3d-form">
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="kick-user-id">User ID</label>
                  <input class="admin3d-form-input" type="text" id="kick-user-id" name="userId" placeholder="Enter user ID" required>
                </div>
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="kick-reason">Reason</label>
                  <textarea class="admin3d-form-textarea" id="kick-reason" name="reason" placeholder="Enter kick reason" required rows="3"></textarea>
                </div>
                <div class="admin3d-form-group">
                  <label class="admin3d-checkbox">
                    <input type="checkbox" name="sendDm" id="kick-send-dm" checked>
                    <span>Send DM notification to user</span>
                  </label>
                </div>
                <div class="admin3d-form-actions">
                  <button type="submit" class="admin3d-btn admin3d-btn-warning" id="confirm-kick">
                    <i class="fas fa-user-slash"></i> Kick User
                  </button>
                </div>
              </form>
            </div>
          </div>
          
          <div class="admin3d-card">
            <div class="admin3d-card-header">
              <div class="admin3d-card-icon">
                <i class="fas fa-clock"></i>
              </div>
              <h3 class="admin3d-card-title">Timeout User</h3>
            </div>
            <div class="admin3d-card-content">
              <p class="admin3d-card-description">
                Temporarily prevent a user from interacting
              </p>
              <form id="timeout-form" class="admin3d-form">
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="timeout-user-id">User ID</label>
                  <input class="admin3d-form-input" type="text" id="timeout-user-id" name="userId" placeholder="Enter user ID" required>
                </div>
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="timeout-duration">Duration</label>
                  <div class="admin3d-form-row">
                    <input class="admin3d-form-input" type="number" id="timeout-duration" name="duration" value="10" min="1" max="10080" required>
                    <select class="admin3d-form-select" id="timeout-unit" name="unit">
                      <option value="m">Minutes</option>
                      <option value="h" selected>Hours</option>
                      <option value="d">Days</option>
                      <option value="w">Weeks</option>
                    </select>
                  </div>
                </div>
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="timeout-reason">Reason</label>
                  <textarea class="admin3d-form-textarea" id="timeout-reason" name="reason" placeholder="Enter timeout reason" required rows="3"></textarea>
                </div>
                <div class="admin3d-form-actions">
                  <button type="submit" class="admin3d-btn admin3d-btn-primary" id="confirm-timeout">
                    <i class="fas fa-stopwatch"></i> Timeout User
                  </button>
                </div>
              </form>
            </div>
          </div>
          
          <div class="admin3d-card">
            <div class="admin3d-card-header">
              <div class="admin3d-card-icon">
                <i class="fas fa-trash-alt"></i>
              </div>
              <h3 class="admin3d-card-title">Purge Messages</h3>
            </div>
            <div class="admin3d-card-content">
              <p class="admin3d-card-description">
                Delete multiple messages from a channel
              </p>
              <form id="purge-form" class="admin3d-form">
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="purge-channel">Channel</label>
                  <select class="admin3d-form-select" id="purge-channel" name="channel" required>
                    <option value="">Select a channel</option>
                    <!-- Channel options added dynamically -->
                  </select>
                </div>
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="purge-amount">Number of Messages</label>
                  <input class="admin3d-form-input" type="number" id="purge-amount" name="amount" value="10" min="1" max="100" required>
                </div>
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="purge-filter">Filter (Optional)</label>
                  <select class="admin3d-form-select" id="purge-filter" name="filter">
                    <option value="none" selected>No filter</option>
                    <option value="user">From specific user</option>
                    <option value="has">Contains text</option>
                    <option value="bots">From bots</option>
                    <option value="humans">From humans</option>
                  </select>
                </div>
                <div class="admin3d-form-actions">
                  <button type="submit" class="admin3d-btn admin3d-btn-primary" id="confirm-purge">
                    <i class="fas fa-broom"></i> Purge Messages
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Ban Management Tab -->
      <div id="ban-management" class="tab-content">
        <div class="admin3d-card">
          <div class="admin3d-card-header">
            <div class="admin3d-card-icon">
              <i class="fas fa-ban"></i>
            </div>
            <h3 class="admin3d-card-title">Server Ban List</h3>
          </div>
          <div class="admin3d-card-content">
            <p class="admin3d-card-description">
              Manage banned users for your server
            </p>
            
            <div class="ban-filters" style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
              <div class="filter-group" style="flex-grow: 1;">
                <div class="admin3d-form-group" style="margin-bottom: 0;">
                  <input type="text" class="admin3d-form-input" id="ban-search" placeholder="Search by username or reason...">
                </div>
              </div>
              
              <div class="filter-group">
                <button class="admin3d-btn admin3d-btn-primary" id="refresh-bans">
                  <i class="fas fa-sync-alt"></i> Refresh
                </button>
              </div>
            </div>
            
            <div class="admin3d-table-container">
              <table class="admin3d-table">
                <thead class="admin3d-table-header">
                  <tr>
                    <th>User</th>
                    <th>Reason</th>
                    <th>Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="bans-list" class="bans-list">
                  <!-- Ban items will be added dynamically -->
                  <tr>
                    <td colspan="4" style="text-align: center; padding: 2rem;">
                      <p>Select a server to view bans</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
        <!-- Blacklist Management -->
        <div class="admin3d-card" style="margin-top: 2rem;">
          <div class="admin3d-card-header">
            <div class="admin3d-card-icon">
              <i class="fas fa-user-lock"></i>
            </div>
            <h3 class="admin3d-card-title">Global Blacklist</h3>
          </div>
          <div class="admin3d-card-content">
            <p class="admin3d-card-description">
              Manage users blacklisted across all servers where your bot is present
            </p>
            
            <form id="blacklist-form" class="admin3d-form">
              <div class="admin3d-form-row">
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="blacklist-user-id">User ID</label>
                  <input class="admin3d-form-input" type="text" id="blacklist-user-id" name="userId" placeholder="Discord User ID" required>
                </div>
                
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="blacklist-reason">Reason</label>
                  <input class="admin3d-form-input" type="text" id="blacklist-reason" name="reason" placeholder="Reason for blacklisting" required>
                </div>
              </div>
              
              <div class="admin3d-form-actions">
                <button type="submit" class="admin3d-btn admin3d-btn-danger" id="add-to-blacklist">
                  <i class="fas fa-user-slash"></i> Add to Blacklist
                </button>
              </div>
            </form>
            
            <div class="admin3d-table-container" style="margin-top: 1.5rem;">
              <table class="admin3d-table">
                <thead class="admin3d-table-header">
                  <tr>
                    <th>User ID</th>
                    <th>Added By</th>
                    <th>Reason</th>
                    <th>Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="blacklist" class="blacklist">
                  <!-- Blacklist entries will be added dynamically -->
                  <tr>
                    <td colspan="5" style="text-align: center; padding: 2rem;">
                      <p>Loading blacklist...</p>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Warnings Tab -->
      <div id="warnings" class="tab-content">
        <div class="admin3d-card">
          <div class="admin3d-card-header">
            <div class="admin3d-card-icon">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 class="admin3d-card-title">User Warnings</h3>
          </div>
          <div class="admin3d-card-content">
            <p class="admin3d-card-description">
              View and manage warnings for server members
            </p>
            
            <div class="admin3d-form-row">
              <div class="admin3d-form-group">
                <label class="admin3d-form-label" for="warning-user-id">User ID</label>
                <input class="admin3d-form-input" type="text" id="warning-user-id" placeholder="Discord User ID">
              </div>
              
              <div class="admin3d-form-actions">
                <button class="admin3d-btn admin3d-btn-primary" id="check-warnings">
                  <i class="fas fa-search"></i> Check Warnings
                </button>
              </div>
            </div>
            
            <div id="warnings-list" class="warnings-list" style="margin-top: 1.5rem;">
              <!-- Warnings will be added dynamically -->
              <p class="empty-message">Enter a user ID to view warnings</p>
            </div>
          </div>
        </div>
        
        <div class="admin3d-card" style="margin-top: 2rem;">
          <div class="admin3d-card-header">
            <div class="admin3d-card-icon">
              <i class="fas fa-plus-circle"></i>
            </div>
            <h3 class="admin3d-card-title">Add Warning</h3>
          </div>
          <div class="admin3d-card-content">
            <p class="admin3d-card-description">
              Issue a new warning to a user
            </p>
            
            <form id="add-warning-form" class="admin3d-form">
              <div class="admin3d-form-group">
                <label class="admin3d-form-label" for="warning-user-id-add">User ID</label>
                <input class="admin3d-form-input" type="text" id="warning-user-id-add" name="userId" placeholder="Discord User ID" required>
              </div>
              
              <div class="admin3d-form-group">
                <label class="admin3d-form-label" for="warning-reason">Reason</label>
                <textarea class="admin3d-form-textarea" id="warning-reason" name="reason" rows="3" placeholder="Reason for warning" required></textarea>
              </div>
              
              <div class="admin3d-form-group">
                <label class="admin3d-form-label">Warning Severity</label>
                <div class="admin3d-radio-group">
                  <label class="admin3d-radio">
                    <input type="radio" name="severity" value="low" checked>
                    <span>Low</span>
                  </label>
                  <label class="admin3d-radio">
                    <input type="radio" name="severity" value="medium">
                    <span>Medium</span>
                  </label>
                  <label class="admin3d-radio">
                    <input type="radio" name="severity" value="high">
                    <span>High</span>
                  </label>
                </div>
              </div>
              
              <div class="admin3d-form-actions">
                <button type="submit" class="admin3d-btn admin3d-btn-warning">
                  <i class="fas fa-exclamation-circle"></i> Add Warning
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Auto-Moderation Tab -->
      <div id="automod" class="tab-content">
        <div class="admin3d-card">
          <div class="admin3d-card-header">
            <div class="admin3d-card-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <h3 class="admin3d-card-title">Auto-Moderation Settings</h3>
          </div>
          <div class="admin3d-card-content">
            <p class="admin3d-card-description">
              Configure automated moderation settings for your server
            </p>
            
            <form id="automod-form" class="admin3d-form">
              <div class="automod-section">
                <h4>Content Filtering</h4>
                <div class="admin3d-checkbox-group">
                  <label class="admin3d-checkbox">
                    <input type="checkbox" name="filterProfanity" id="filter-profanity">
                    <span>Filter Profanity</span>
                  </label>
                  <label class="admin3d-checkbox">
                    <input type="checkbox" name="filterSpam" id="filter-spam">
                    <span>Anti-Spam Protection</span>
                  </label>
                  <label class="admin3d-checkbox">
                    <input type="checkbox" name="filterInvites" id="filter-invites">
                    <span>Block Discord Invites</span>
                  </label>
                </div>
              </div>
              
              <div class="automod-section" style="margin-top: 1.5rem;">
                <h4>Raid Protection</h4>
                <div class="admin3d-checkbox-group">
                  <label class="admin3d-checkbox">
                    <input type="checkbox" name="antiRaid" id="anti-raid">
                    <span>Enable Anti-Raid</span>
                  </label>
                </div>
                
                <div id="raid-options" class="automod-options" style="display: none; margin-top: 1rem;">
                  <div class="admin3d-form-group">
                    <label class="admin3d-form-label" for="raid-threshold">Join Threshold</label>
                    <select class="admin3d-form-select" id="raid-threshold" name="raidThreshold">
                      <option value="5">5 joins per minute</option>
                      <option value="10" selected>10 joins per minute</option>
                      <option value="15">15 joins per minute</option>
                      <option value="20">20 joins per minute</option>
                    </select>
                  </div>
                  
                  <div class="admin3d-form-group">
                    <label class="admin3d-form-label">Action</label>
                    <div class="admin3d-radio-group">
                      <label class="admin3d-radio">
                        <input type="radio" name="raidAction" value="lockdown" checked>
                        <span>Lockdown Server</span>
                      </label>
                      <label class="admin3d-radio">
                        <input type="radio" name="raidAction" value="kick">
                        <span>Kick New Members</span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="automod-section" style="margin-top: 1.5rem;">
                <h4>Advanced Settings</h4>
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="custom-blacklist">Custom Word Blacklist</label>
                  <textarea class="admin3d-form-textarea" id="custom-blacklist" name="customBlacklist" rows="3" placeholder="Enter words separated by commas"></textarea>
                  <span class="admin3d-form-hint">Words will be filtered in all message content</span>
                </div>
                
                <div class="admin3d-form-group">
                  <label class="admin3d-form-label" for="violation-punishment">Repeated Violation Action</label>
                  <select class="admin3d-form-select" id="violation-punishment" name="violationPunishment">
                    <option value="warn">Warning Only</option>
                    <option value="timeout" selected>Timeout (10 minutes)</option>
                    <option value="kick">Kick Member</option>
                    <option value="ban">Ban Member</option>
                  </select>
                </div>
              </div>
              
              <div class="admin3d-form-actions" style="margin-top: 2rem;">
                <button type="submit" class="admin3d-btn admin3d-btn-primary" id="save-automod">
                  <i class="fas fa-save"></i> Save Settings
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Recent Moderation Actions -->
  <h2 class="section-subtitle" style="margin-top: 3rem;">Recent Actions</h2>
  <div class="admin3d-card">
    <div class="admin3d-card-header">
      <div class="admin3d-card-icon">
        <i class="fas fa-history"></i>
      </div>
      <h3 class="admin3d-card-title">Moderation Activity Log</h3>
    </div>
    <div class="admin3d-card-content">
      <div class="log-controls" style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
        <div class="log-filter" style="flex-grow: 1;">
          <div class="admin3d-form-group" style="margin-bottom: 0;">
            <select class="admin3d-form-select" id="log-type-filter">
              <option value="all">All Actions</option>
              <option value="ban">Bans</option>
              <option value="kick">Kicks</option>
              <option value="timeout">Timeouts</option>
              <option value="warn">Warnings</option>
              <option value="purge">Message Purges</option>
            </select>
          </div>
        </div>
        <button class="admin3d-btn admin3d-btn-primary" id="refresh-logs">
          <i class="fas fa-sync-alt"></i> Refresh
        </button>
      </div>
      
      <div class="moderation-log">
        <div class="moderation-log-item">
          <div class="moderation-log-icon">
            <i class="fas fa-ban"></i>
          </div>
          <div class="moderation-log-content">
            <div class="moderation-log-title">User Banned: troubleuser#1234</div>
            <div class="moderation-log-details">
              <div class="moderation-log-reason">Reason: Repeated violations of server rules</div>
              <div class="moderation-log-meta">
                <span class="moderation-log-moderator">By: Admin#1234</span>
                <span class="moderation-log-time">Today at <%= new Date().toLocaleTimeString() %></span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="moderation-log-item">
          <div class="moderation-log-icon">
            <i class="fas fa-user-slash"></i>
          </div>
          <div class="moderation-log-content">
            <div class="moderation-log-title">User Kicked: problemuser#5678</div>
            <div class="moderation-log-details">
              <div class="moderation-log-reason">Reason: Spamming in #general</div>
              <div class="moderation-log-meta">
                <span class="moderation-log-moderator">By: Mod#5678</span>
                <span class="moderation-log-time">Yesterday at 3:45 PM</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="moderation-log-item">
          <div class="moderation-log-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="moderation-log-content">
            <div class="moderation-log-title">User Timed Out: newuser#9012</div>
            <div class="moderation-log-details">
              <div class="moderation-log-reason">Reason: Posting inappropriate content</div>
              <div class="moderation-log-meta">
                <span class="moderation-log-moderator">By: Admin#1234</span>
                <span class="moderation-log-time">2 days ago at 1:12 PM</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Moderation Page Styles */
  .admin3d-form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
  
  .admin3d-action-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-top: 1rem;
  }
  
  .moderation-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1.5rem;
    margin-top: 0.5rem;
  }
  
  .moderation-log {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .moderation-log-item {
    display: flex;
    gap: 1rem;
    background-color: rgba(30, 31, 40, 0.5);
    border-radius: 0.5rem;
    padding: 1rem;
    border-left: 4px solid;
    transition: all 0.2s ease;
  }
  
  .moderation-log-item:hover {
    background-color: rgba(35, 36, 48, 0.7);
    transform: translateY(-2px);
  }
  
  .moderation-log-item:nth-child(1) {
    border-left-color: #f04747;
  }
  
  .moderation-log-item:nth-child(2) {
    border-left-color: #faa61a;
  }
  
  .moderation-log-item:nth-child(3) {
    border-left-color: #5865f2;
  }
  
  .moderation-log-icon {
    width: 40px;
    height: 40px;
    background-color: rgba(55, 60, 80, 0.7);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  
  .moderation-log-item:nth-child(1) .moderation-log-icon {
    color: #f04747;
  }
  
  .moderation-log-item:nth-child(2) .moderation-log-icon {
    color: #faa61a;
  }
  
  .moderation-log-item:nth-child(3) .moderation-log-icon {
    color: #5865f2;
  }
  
  .moderation-log-icon i {
    font-size: 1.25rem;
  }
  
  .moderation-log-content {
    flex-grow: 1;
  }
  
  .moderation-log-title {
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #fff;
  }
  
  .moderation-log-details {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.7);
  }
  
  .moderation-log-meta {
    margin-top: 0.5rem;
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.5);
    display: flex;
    justify-content: space-between;
  }
  
  .warnings-list {
    max-height: 300px;
    overflow-y: auto;
    border-radius: 0.5rem;
    background-color: rgba(30, 31, 40, 0.3);
    padding: 0.5rem;
  }
  
  .warning-item {
    background-color: rgba(40, 43, 54, 0.6);
    border-radius: 0.5rem;
    padding: 1rem;
    margin-bottom: 0.75rem;
    border-left: 3px solid;
    transition: all 0.2s ease;
  }
  
  .warning-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  }
  
  .warning-item.low {
    border-left-color: #43b581;
  }
  
  .warning-item.medium {
    border-left-color: #faa61a;
  }
  
  .warning-item.high {
    border-left-color: #f04747;
  }
  
  /* Tab styling copied from messages page */
  .admin3d-tabs {
    display: flex;
    overflow-x: auto;
    gap: 1rem;
    border-bottom: 1px solid rgba(49, 41, 95, 0.3);
    padding-bottom: 1rem;
    margin-bottom: 2rem;
  }
  
  .tab-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1rem;
    font-weight: 600;
    padding: 0.75rem 1.5rem;
    border-radius: 12px;
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: 0.75rem;
    position: relative;
  }
  
  .tab-btn:hover {
    color: var(--text);
    background-color: var(--background-lighter);
  }
  
  .tab-btn.active {
    color: var(--text);
    background-color: var(--background-lighter);
  }
  
  .tab-btn.active::after {
    content: "";
    position: absolute;
    bottom: -1rem;
    left: 50%;
    transform: translateX(-50%);
    width: 30%;
    height: 3px;
    background: linear-gradient(90deg, var(--primary) 0%, transparent 100%);
    border-radius: 3px;
  }
  
  .tab-content-container {
    margin-top: 2rem;
  }
  
  .tab-content {
    display: none;
  }
  
  .tab-content.active {
    display: block;
    animation: fadeIn 0.5s ease;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @media (max-width: 768px) {
    .admin3d-form-row,
    .moderation-stats-grid,
    .admin3d-action-grid {
      grid-template-columns: 1fr;
    }
    
    .admin3d-tabs {
      flex-wrap: wrap;
    }
    
    .tab-btn {
      flex: 1;
    }
  }
</style>

<script>
  // Tab functionality
  document.addEventListener('DOMContentLoaded', function() {
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const tabId = btn.getAttribute('data-tab');
        
        // Deactivate all tabs
        tabBtns.forEach(tabBtn => tabBtn.classList.remove('active'));
        tabContents.forEach(content => content.classList.remove('active'));
        
        // Activate selected tab
        btn.classList.add('active');
        document.getElementById(tabId).classList.add('active');
      });
    });
    
    // Anti-raid checkbox toggle
    const antiRaidCheckbox = document.getElementById('anti-raid');
    const raidOptions = document.getElementById('raid-options');
    
    if (antiRaidCheckbox && raidOptions) {
      antiRaidCheckbox.addEventListener('change', function() {
        raidOptions.style.display = this.checked ? 'block' : 'none';
      });
    }
    
    // Load existing moderation stats on page load
    const serverSelect = document.getElementById('server-select');
    if (serverSelect) {
      serverSelect.addEventListener('change', function() {
        if (this.value) {
          loadModerationStats(this.value);
        }
      });
    }
  });
  
  // Function to load moderation statistics
  function loadModerationStats(serverId) {
    // This would typically be an API call to get server stats
    // For now we'll simulate loading with random data
    document.getElementById('total-bans').textContent = Math.floor(Math.random() * 50);
    document.getElementById('total-kicks').textContent = Math.floor(Math.random() * 100);
    document.getElementById('total-warnings').textContent = Math.floor(Math.random() * 200);
    document.getElementById('total-timeouts').textContent = Math.floor(Math.random() * 20);
  }
</script>