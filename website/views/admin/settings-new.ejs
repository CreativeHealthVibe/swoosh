<%- include('../partials/admin-header-fixed') %>
<% 
// Set page-level variables and defaults
const _adminUsers = typeof adminUsers !== 'undefined' ? adminUsers : [];
const _localAdminUsers = typeof localAdminUsers !== 'undefined' ? localAdminUsers : [];
%>

<div class="settings-container">
  <div class="page-header">
    <div class="header-content">
      <div class="header-title">
        <h1 class="gradient-text"><i class="fas fa-cog"></i> Bot Settings</h1>
        <p>Configure and customize your bot's behavior and appearance</p>
      </div>
      <div class="header-actions">
        <div class="status-indicator">
          <div class="status-dot online"></div>
          <span>Bot Online</span>
        </div>
      </div>
    </div>
  </div>

  <% if (messages && messages.success) { %>
  <div class="notification success">
    <div class="notification-icon">
      <i class="fas fa-check-circle"></i>
    </div>
    <div class="notification-content">
      <%= messages.success %>
    </div>
    <button class="notification-close" onclick="this.parentElement.remove()">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <% } %>
  
  <% if (messages && messages.error) { %>
  <div class="notification error">
    <div class="notification-icon">
      <i class="fas fa-exclamation-circle"></i>
    </div>
    <div class="notification-content">
      <%= messages.error %>
    </div>
    <button class="notification-close" onclick="this.parentElement.remove()">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <% } %>

  <div class="content-grid">
    <div class="settings-nav">
      <div class="nav-header">
        <h2>Settings</h2>
      </div>
      <ul class="nav-list">
        <li class="active" data-tab="general">
          <i class="fas fa-sliders-h"></i>
          <span>General</span>
        </li>
        <li data-tab="logging">
          <i class="fas fa-file-alt"></i>
          <span>Logging</span>
        </li>
        <li data-tab="tickets">
          <i class="fas fa-ticket-alt"></i>
          <span>Tickets</span>
        </li>
        <li data-tab="admin">
          <i class="fas fa-user-shield"></i>
          <span>Admin Access</span>
        </li>
        <li data-tab="validation">
          <i class="fas fa-check-circle"></i>
          <span>Validation</span>
        </li>
        <li class="premium" data-tab="premium">
          <i class="fas fa-crown"></i>
          <span>Premium</span>
        </li>
      </ul>
    </div>
    
    <div class="settings-content">
      <!-- General Settings -->
      <div class="tab-content active" id="general">
        <div class="glass-card">
          <div class="card-header">
            <h2>General Settings</h2>
            <div class="card-icon">
              <i class="fas fa-sliders-h"></i>
            </div>
          </div>
          <div class="card-body">
            <form id="generalForm" action="/admin/settings/update" method="POST">
              <div class="settings-section">
                <h3>Bot Appearance</h3>
                
                <div class="form-row">
                  <div class="form-group half">
                    <label for="prefix">Command Prefix</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-terminal"></i>
                      </div>
                      <input type="text" class="form-control" id="prefix" name="prefix" value="<%= config.prefix %>" maxlength="3">
                    </div>
                    <div class="input-hint">Character that precedes all commands (e.g., "!")</div>
                  </div>
                  
                  <div class="form-group half">
                    <label for="embedColor">Embed Color</label>
                    <div class="color-picker-wrapper">
                      <input type="color" id="embedColor" name="embedColor" value="<%= config.embedColor %>">
                      <div class="color-preview" style="background-color: <%= config.embedColor %>"></div>
                    </div>
                    <div class="input-hint">Color used in message embeds</div>
                  </div>
                </div>
              </div>
              
              <div class="settings-section">
                <h3>Bot Status</h3>
                
                <div class="form-row">
                  <div class="form-group third">
                    <label for="statusType">Status Type</label>
                    <div class="select-wrapper">
                      <select class="form-control" id="statusType" name="statusType">
                        <option value="PLAYING" <%= config.activityType === 'PLAYING' ? 'selected' : '' %>>Playing</option>
                        <option value="LISTENING" <%= config.activityType === 'LISTENING' ? 'selected' : '' %>>Listening to</option>
                        <option value="WATCHING" <%= config.activityType === 'WATCHING' ? 'selected' : '' %>>Watching</option>
                        <option value="COMPETING" <%= config.activityType === 'COMPETING' ? 'selected' : '' %>>Competing in</option>
                      </select>
                      <div class="select-arrow"><i class="fas fa-chevron-down"></i></div>
                    </div>
                  </div>
                  
                  <div class="form-group two-thirds">
                    <label for="statusText">Status Text</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-comment-alt"></i>
                      </div>
                      <input type="text" class="form-control" id="statusText" name="statusText" value="<%= config.activityName %>" placeholder="e.g., help commands">
                    </div>
                    <div class="input-hint">Will show as "Playing/Watching/etc [your text]"</div>
                  </div>
                </div>
              </div>
              
              <div class="form-actions">
                <button type="submit" class="btn primary-btn glow-btn">
                  <i class="fas fa-save"></i> Save General Settings
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Logging Settings -->
      <div class="tab-content" id="logging">
        <div class="glass-card">
          <div class="card-header">
            <h2>Logging Settings</h2>
            <div class="card-icon">
              <i class="fas fa-file-alt"></i>
            </div>
          </div>
          <div class="card-body">
            <form id="loggingForm" action="/admin/settings/update-logging" method="POST">
              <div class="settings-section">
                <h3>Main Logging Channel</h3>
                
                <div class="form-row">
                  <div class="form-group full">
                    <label for="logChannelId">Primary Log Channel</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-hashtag"></i>
                      </div>
                      <input type="text" class="form-control" id="logChannelId" name="logChannelId" value="<%= config.logChannelId %>" placeholder="Enter channel ID">
                    </div>
                    <div class="input-hint">Main channel for bot logs and notifications</div>
                  </div>
                </div>
              </div>
              
              <div class="settings-section">
                <h3>Specialized Logging Channels</h3>
                <p class="section-description">Configure separate channels for different types of logs</p>
                
                <div class="channel-grid">
                  <div class="channel-item">
                    <div class="channel-icon">
                      <i class="fas fa-trash-alt"></i>
                    </div>
                    <div class="channel-input">
                      <label for="deletedMessages">Deleted Messages</label>
                      <input type="text" class="form-control" id="deletedMessages" name="deletedMessages" value="<%= config.loggingChannels.deletedMessages %>" placeholder="Channel ID">
                    </div>
                  </div>
                  
                  <div class="channel-item">
                    <div class="channel-icon">
                      <i class="fas fa-edit"></i>
                    </div>
                    <div class="channel-input">
                      <label for="editedMessages">Edited Messages</label>
                      <input type="text" class="form-control" id="editedMessages" name="editedMessages" value="<%= config.loggingChannels.editedMessages %>" placeholder="Channel ID">
                    </div>
                  </div>
                  
                  <div class="channel-item">
                    <div class="channel-icon">
                      <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="channel-input">
                      <label for="memberJoin">Member Joins/Leaves</label>
                      <input type="text" class="form-control" id="memberJoin" name="memberJoin" value="<%= config.loggingChannels.memberJoin %>" placeholder="Channel ID">
                    </div>
                  </div>
                  
                  <div class="channel-item">
                    <div class="channel-icon">
                      <i class="fas fa-gavel"></i>
                    </div>
                    <div class="channel-input">
                      <label for="moderationActions">Moderation Actions</label>
                      <input type="text" class="form-control" id="moderationActions" name="moderationActions" value="<%= config.loggingChannels.moderationActions %>" placeholder="Channel ID">
                    </div>
                  </div>
                  
                  <div class="channel-item">
                    <div class="channel-icon">
                      <i class="fas fa-terminal"></i>
                    </div>
                    <div class="channel-input">
                      <label for="commandUsage">Command Usage</label>
                      <input type="text" class="form-control" id="commandUsage" name="commandUsage" value="<%= config.loggingChannels.commandUsage %>" placeholder="Channel ID">
                    </div>
                  </div>
                  
                  <div class="channel-item">
                    <div class="channel-icon">
                      <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="channel-input">
                      <label for="botStatus">Bot Status</label>
                      <input type="text" class="form-control" id="botStatus" name="botStatus" value="<%= config.loggingChannels.botStatus %>" placeholder="Channel ID">
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="form-actions">
                <button type="submit" class="btn primary-btn glow-btn">
                  <i class="fas fa-save"></i> Save Logging Settings
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Tickets Settings -->
      <div class="tab-content" id="tickets">
        <div class="glass-card">
          <div class="card-header">
            <h2>Ticket System Settings</h2>
            <div class="card-icon">
              <i class="fas fa-ticket-alt"></i>
            </div>
          </div>
          <div class="card-body">
            <form id="ticketsForm" action="/admin/settings/update-tickets" method="POST">
              <div class="settings-section">
                <h3>Ticket Configuration</h3>
                
                <div class="form-row">
                  <div class="form-group full">
                    <label for="ticketCategory">Ticket Category</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-folder"></i>
                      </div>
                      <input type="text" class="form-control" id="ticketCategory" name="ticketCategory" value="<%= config.ticketCategory %>" placeholder="Category ID">
                    </div>
                    <div class="input-hint">Category where ticket channels will be created</div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group half">
                    <label for="ticketTranscripts">Transcript Channel</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-file-alt"></i>
                      </div>
                      <input type="text" class="form-control" id="ticketTranscripts" name="ticketTranscripts" value="<%= config.loggingChannels.ticketTranscripts %>" placeholder="Channel ID">
                    </div>
                    <div class="input-hint">Channel for storing ticket transcripts</div>
                  </div>
                  
                  <div class="form-group half">
                    <label for="maxTicketsPerUser">Max Tickets Per User</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-list-ol"></i>
                      </div>
                      <input type="number" class="form-control" id="maxTicketsPerUser" name="maxTicketsPerUser" value="<%= config.maxTicketsPerUser || 3 %>" min="1" max="10">
                    </div>
                    <div class="input-hint">Maximum concurrent tickets per user</div>
                  </div>
                </div>
              </div>
              
              <div class="settings-section">
                <h3>Ticket Types</h3>
                <p class="section-description">Configure the types of tickets users can create</p>
                
                <div class="ticket-types">
                  <% 
                  // Ensure ticketTypes is an array
                  const defaultTypes = ['Support', 'Report', 'Suggestion', 'Other'];
                  let ticketTypesArray = defaultTypes;
                  
                  // Use config.ticketTypes if it's an array, otherwise use default
                  if (config.ticketTypes && Array.isArray(config.ticketTypes)) {
                    ticketTypesArray = config.ticketTypes;
                  }
                  
                  // Loop through the array
                  for(let i = 0; i < ticketTypesArray.length; i++) { 
                    const type = ticketTypesArray[i];
                  %>
                    <div class="ticket-type-item">
                      <div class="input-group">
                        <div class="input-group-icon">
                          <% if (i === 0) { %>
                            <i class="fas fa-question-circle"></i>
                          <% } else if (i === 1) { %>
                            <i class="fas fa-flag"></i>
                          <% } else if (i === 2) { %>
                            <i class="fas fa-lightbulb"></i>
                          <% } else { %>
                            <i class="fas fa-ticket-alt"></i>
                          <% } %>
                        </div>
                        <input type="text" class="form-control" name="ticketType<%= i %>" value="<%= type %>" placeholder="Ticket type">
                      </div>
                      <% if (i > 0) { %>
                        <button type="button" class="action-btn delete remove-type" disabled>
                          <i class="fas fa-trash"></i>
                        </button>
                      <% } %>
                    </div>
                  <% } %>
                </div>
                
                <button type="button" class="btn outline-btn add-more-btn" disabled>
                  <i class="fas fa-plus"></i> Add More Types
                </button>
              </div>
              
              <div class="form-actions">
                <button type="submit" class="btn primary-btn glow-btn">
                  <i class="fas fa-save"></i> Save Ticket Settings
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Admin Access Settings -->
      <div class="tab-content" id="admin">
        <div class="glass-card">
          <div class="card-header">
            <h2>Admin Access Settings</h2>
            <div class="card-icon">
              <i class="fas fa-user-shield"></i>
            </div>
          </div>
          <div class="card-body">
            <!-- Admin Users Tabs -->
            <div class="admin-tabs">
              <button class="tab-btn active" onclick="showTab('discord-admins')">
                <i class="fab fa-discord"></i> Discord Admins
              </button>
              <button class="tab-btn" onclick="showTab('local-admins')">
                <i class="fas fa-user-lock"></i> Local Admins
              </button>
              <button class="tab-btn" onclick="showTab('add-discord')">
                <i class="fas fa-plus-circle"></i> Add Discord Admin
              </button>
              <button class="tab-btn" onclick="showTab('add-local')">
                <i class="fas fa-plus-circle"></i> Add Local Admin
              </button>
            </div>
            
            <script>
              function showTab(tabId) {
                // Remove active class from all tab buttons
                document.querySelectorAll('.admin-tabs .tab-btn').forEach(btn => {
                  btn.classList.remove('active');
                });
                
                // Add active class to the clicked button
                document.querySelector(`.admin-tabs .tab-btn[onclick*="${tabId}"]`).classList.add('active');
                
                // Hide all tab panes
                document.querySelectorAll('.tab-pane').forEach(pane => {
                  pane.classList.remove('active');
                });
                
                // Show the selected tab pane
                document.getElementById(tabId).classList.add('active');
              }
            </script>

            <!-- Admin Tabs Content -->
            <div class="settings-section">
              <!-- Discord Admins Tab -->
              <div class="tab-pane active" id="discord-admins">
                <h3 class="section-heading">Discord Admin Users</h3>
                <p class="section-description">These Discord users have access to the admin panel via Discord OAuth</p>
                
                <div class="admin-users admin-content-section">
                  <% if (Array.isArray(_adminUsers) && _adminUsers.length > 0) { %>
                    <div class="admin-cards">
                      <% _adminUsers.forEach(user => { %>
                        <div class="admin-card">
                          <div class="admin-card-content">
                            <div class="admin-card-header">
                              <% if (user.avatarUrl) { %>
                                <img src="<%= user.avatarUrl %>" alt="Discord avatar" class="admin-card-avatar">
                              <% } else { %>
                                <div class="admin-card-avatar admin-card-avatar-placeholder">
                                  <i class="fab fa-discord"></i>
                                </div>
                              <% } %>
                              <div class="admin-card-user-info">
                                <% if (user.username) { %>
                                  <span class="admin-card-username"><%= user.displayName %></span>
                                  <span class="admin-card-tag">@<%= user.username %></span>
                                <% } else { %>
                                  <span class="admin-card-username"><%= user.comment %></span>
                                <% } %>
                              </div>
                            </div>
                            <div class="admin-card-details">
                              <div class="admin-card-id">
                                <div class="admin-card-label">User ID:</div>
                                <code><%= user.id %></code>
                              </div>
                              <form action="/admin/settings/users/remove" method="POST" class="admin-card-actions">
                                <input type="hidden" name="userId" value="<%= user.id %>">
                                <button type="submit" class="admin-card-btn-remove" onclick="return confirm('Are you sure you want to remove this admin user?')">
                                  <i class="fas fa-trash"></i> Remove Admin Access
                                </button>
                              </form>
                            </div>
                          </div>
                        </div>
                      <% }) %>
                    </div>
                  <% } else { %>
                    <div class="empty-state">
                      <i class="fas fa-user-slash"></i>
                      <p>No Discord admin users found</p>
                    </div>
                  <% } %>
                </div>
              </div>
              
              <!-- Local Admins Tab -->
              <div class="tab-pane" id="local-admins">
                <h3>Local Admin Accounts</h3>
                <p class="section-description">These users have access to the admin panel via local username/password</p>
                
                <div class="admin-users">
                  <% if (Array.isArray(_localAdminUsers) && _localAdminUsers.length > 0) { %>
                    <div class="table-responsive">
                      <table class="modern-table">
                        <thead>
                          <tr>
                            <th>Username</th>
                            <th>Email</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <% _localAdminUsers.forEach(user => { %>
                            <tr>
                              <td><%= user.username %></td>
                              <td><%= user.email %></td>
                              <td>
                                <form action="/admin/settings/localuser/remove" method="POST" class="inline-form">
                                  <input type="hidden" name="userId" value="<%= user.id %>">
                                  <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to remove this admin user?')">
                                    <i class="fas fa-trash"></i> Remove
                                  </button>
                                </form>
                              </td>
                            </tr>
                          <% }) %>
                        </tbody>
                      </table>
                    </div>
                  <% } else { %>
                    <div class="empty-state">
                      <i class="fas fa-user-slash"></i>
                      <p>No local admin users found</p>
                    </div>
                  <% } %>
                </div>
              </div>
              
              <!-- Add Discord Admin Tab -->
              <div class="tab-pane" id="add-discord">
                <h3>Add Discord Admin</h3>
                <p class="section-description">Give a Discord user admin access to this bot panel</p>
                
                <form action="/admin/settings/users/add" method="POST" class="styled-form">
                  <div class="form-group">
                    <label for="discordId">Discord User ID</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fab fa-discord"></i>
                      </div>
                      <input type="text" class="form-control" id="discordId" name="discordId" placeholder="Enter Discord User ID" required>
                    </div>
                    <div class="input-hint">The user's Discord ID (right-click user → Copy ID)</div>
                  </div>
                  
                  <div class="form-group">
                    <label for="comment">Comment (Optional)</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-comment"></i>
                      </div>
                      <input type="text" class="form-control" id="comment" name="comment" placeholder="Add a note about this user">
                    </div>
                    <div class="input-hint">Optional note to help identify this user</div>
                  </div>
                  
                  <div class="form-actions">
                    <button type="submit" class="btn primary-btn">
                      <i class="fas fa-plus-circle"></i> Add Discord Admin
                    </button>
                  </div>
                </form>
              </div>
              
              <!-- Add Local Admin Tab -->
              <div class="tab-pane" id="add-local">
                <h3>Add Local Admin</h3>
                <p class="section-description">Create a local username/password admin account</p>
                
                <form action="/admin/settings/localuser/add" method="POST" class="styled-form">
                  <div class="form-group">
                    <label for="username">Username</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-user"></i>
                      </div>
                      <input type="text" class="form-control" id="username" name="username" placeholder="Enter username" required>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="email">Email</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-envelope"></i>
                      </div>
                      <input type="email" class="form-control" id="email" name="email" placeholder="Enter email" required>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="password">Password</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-lock"></i>
                      </div>
                      <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-lock"></i>
                      </div>
                      <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm password" required>
                    </div>
                  </div>
                  
                  <div class="form-actions">
                    <button type="submit" class="btn primary-btn">
                      <i class="fas fa-plus-circle"></i> Add Local Admin
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Validation Settings -->
      <div class="tab-content" id="validation">
        <div class="glass-card">
          <div class="card-header">
            <h2>Validation Settings</h2>
            <div class="card-icon">
              <i class="fas fa-check-circle"></i>
            </div>
          </div>
          <div class="card-body">
            <form id="validationForm" action="/admin/settings/update-validation" method="POST">
              <div class="settings-section">
                <h3>Content Filter</h3>
                
                <div class="form-row">
                  <div class="form-group full">
                    <label>Profanity Filter</label>
                    <div class="toggle-switch">
                      <input type="checkbox" id="profanityFilter" name="profanityFilter" class="toggle-input" <%= config.contentFilter && config.contentFilter.profanity ? 'checked' : '' %>>
                      <label for="profanityFilter" class="toggle-label"></label>
                    </div>
                    <div class="input-hint">Automatically filter profanity in messages</div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group full">
                    <label>Spam Detection</label>
                    <div class="toggle-switch">
                      <input type="checkbox" id="spamDetection" name="spamDetection" class="toggle-input" <%= config.contentFilter && config.contentFilter.spam ? 'checked' : '' %>>
                      <label for="spamDetection" class="toggle-label"></label>
                    </div>
                    <div class="input-hint">Detect and prevent spam messages</div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group full">
                    <label>Mass Mention Protection</label>
                    <div class="toggle-switch">
                      <input type="checkbox" id="mentionProtection" name="mentionProtection" class="toggle-input" <%= config.contentFilter && config.contentFilter.massMention ? 'checked' : '' %>>
                      <label for="mentionProtection" class="toggle-label"></label>
                    </div>
                    <div class="input-hint">Prevent messages with excessive mentions</div>
                  </div>
                </div>
              </div>
              
              <div class="settings-section">
                <h3>Verification</h3>
                
                <div class="form-row">
                  <div class="form-group full">
                    <label>Member Verification</label>
                    <div class="toggle-switch">
                      <input type="checkbox" id="memberVerification" name="memberVerification" class="toggle-input" <%= config.verification && config.verification.enabled ? 'checked' : '' %>>
                      <label for="memberVerification" class="toggle-label"></label>
                    </div>
                    <div class="input-hint">Require new members to complete verification</div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group full">
                    <label for="verificationChannel">Verification Channel</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-hashtag"></i>
                      </div>
                      <input type="text" class="form-control" id="verificationChannel" name="verificationChannel" value="<%= config.verification ? config.verification.channelId : '' %>" placeholder="Channel ID">
                    </div>
                    <div class="input-hint">Channel where verification takes place</div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group full">
                    <label for="verifiedRole">Verified Role</label>
                    <div class="input-group">
                      <div class="input-group-icon">
                        <i class="fas fa-user-check"></i>
                      </div>
                      <input type="text" class="form-control" id="verifiedRole" name="verifiedRole" value="<%= config.verification ? config.verification.roleId : '' %>" placeholder="Role ID">
                    </div>
                    <div class="input-hint">Role assigned after verification</div>
                  </div>
                </div>
              </div>
              
              <div class="form-actions">
                <button type="submit" class="btn primary-btn glow-btn">
                  <i class="fas fa-save"></i> Save Validation Settings
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Premium Settings -->
      <div class="tab-content" id="premium">
        <div class="glass-card premium-card">
          <div class="card-header">
            <h2>Premium Features</h2>
            <div class="card-icon">
              <i class="fas fa-crown"></i>
            </div>
          </div>
          <div class="card-body">
            <div class="premium-info">
              <div class="premium-header">
                <i class="fas fa-star premium-icon"></i>
                <h3>Unlock Premium Features</h3>
              </div>
              <p>Upgrade to SWOOSH Premium to unlock advanced features and capabilities.</p>
              
              <div class="premium-benefits">
                <div class="benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>Advanced Auto-Moderation</span>
                </div>
                <div class="benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>Custom Bot Appearance</span>
                </div>
                <div class="benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>Unlimited Ticket Types</span>
                </div>
                <div class="benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>Priority Support</span>
                </div>
                <div class="benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>Auto-Responder Configuration</span>
                </div>
                <div class="benefit-item">
                  <i class="fas fa-check-circle"></i>
                  <span>Custom Welcome Messages</span>
                </div>
              </div>
              
              <div class="premium-actions">
                <a href="https://swooshbot.com/premium" target="_blank" class="btn premium-btn">
                  <i class="fas fa-crown"></i> Get Premium
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Nav tab functionality
    const navItems = document.querySelectorAll('.settings-nav .nav-list li');
    const tabContents = document.querySelectorAll('.tab-content');
    
    navItems.forEach(item => {
      item.addEventListener('click', function() {
        // Remove active class from all nav items
        navItems.forEach(nav => nav.classList.remove('active'));
        
        // Add active class to clicked item
        this.classList.add('active');
        
        // Hide all tab contents
        tabContents.forEach(tab => tab.classList.remove('active'));
        
        // Show corresponding tab content
        const tabId = this.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');
      });
    });
    
    // Color picker preview update
    const colorPicker = document.getElementById('embedColor');
    const colorPreview = document.querySelector('.color-preview');
    
    if (colorPicker && colorPreview) {
      colorPicker.addEventListener('input', function() {
        colorPreview.style.backgroundColor = this.value;
      });
    }
    
    // Add animations for glass cards
    const cards = document.querySelectorAll('.glass-card');
    cards.forEach((card, index) => {
      // Add initial transform for animation
      card.style.transform = 'translateY(20px)';
      
      setTimeout(() => {
        card.style.transform = 'translateY(0)';
        card.style.transition = 'all 0.3s ease ' + (index * 0.1) + 's';
      }, 100);
    });
  });
</script>

<%- include('../partials/admin-footer') %>
